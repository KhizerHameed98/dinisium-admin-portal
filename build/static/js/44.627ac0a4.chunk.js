(this["webpackJsonpsuper-admin-frontend"]=this["webpackJsonpsuper-admin-frontend"]||[]).push([[44],{956:function(e,t,s){"use strict";s.r(t);var a=s(24),c=s(1),n=s(10),l=s(2),r=s(660),i=s(8),d=s(20),o=s(13),j=s(14),b=(s(413),s(11)),u=s(3);t.default=Object(o.b)(null,{createItoSeries:d.o,loadUser:d.mb})((function(e){var t,s,m,p,O,h,x=e.createItoSeries,f=(e.loadUser,Object(o.c)()),v=Object(o.d)((function(e){var t,s;return null===(t=e.ito)||void 0===t||null===(s=t.assignedItosData)||void 0===s?void 0:s.data})),N=Object(j.g)(),g=Object(l.useState)(!1),y=Object(n.a)(g,2),S=y[0],D=y[1],_=Object(l.useState)(!1),w=Object(n.a)(_,2),C=w[0],E=w[1],I=Object(l.useState)(!1),T=Object(n.a)(I,2),k=T[0],A=T[1],L=(Object(o.d)((function(e){return e.auth.userDetails})),Object(o.d)((function(e){var t,s;return null===e||void 0===e||null===(t=e.ito)||void 0===t||null===(s=t.ongoingData)||void 0===s?void 0:s.data}))),q=Object(l.useState)({name:"",start_date:"",end_date:"",description:"",supply:"",ito_id:""}),F=Object(n.a)(q,2),R=F[0],J=F[1],U=R.name,$=R.start_date,z=R.end_date,B=R.description,H=R.supply,V=R.ito_id,W=function(e){J(Object(c.a)(Object(c.a)({},R),{},Object(a.a)({},e.target.name,e.target.value)))};null===L||void 0===L||L.map((function(e){e.ito_id==V&&(t=e.start_date,s=e.end_date)})),m=Date.parse(t),p=Date.parse(s),O=Date.parse($),h=Date.parse(z);var G=function(){return D(!1)};Object(l.useEffect)((function(){f(Object(d.F)()),f(Object(d.O)())}),[]);return Object(u.jsxs)("div",{className:"col-12 col-md-8 offset-md-2",children:[Object(u.jsx)("div",{className:"row",children:Object(u.jsx)("div",{className:"col-md-12",children:Object(u.jsx)("div",{className:"card mb-4",children:Object(u.jsxs)("div",{className:"card-body p-5",children:[Object(u.jsxs)("form",{className:"form",onSubmit:function(e){e.preventDefault(),O<=p&&O>=m||h<=p&&h>=m?i.b.error("ITO series in this date range already exists, please select another start and end date"):D(!0)},children:[Object(u.jsxs)("div",{className:"form-group row",children:[Object(u.jsx)("div",{className:"col-sm-6",children:Object(u.jsxs)("div",{className:"form-group",children:[Object(u.jsx)("label",{children:"Series Name"}),Object(u.jsx)("input",{type:"text",placeholder:"Series Name",className:"form-control",name:"name",value:U,onChange:function(e){return W(e)},required:k})]})}),Object(u.jsx)("div",{className:"col-sm-6",children:Object(u.jsxs)("div",{className:"form-group",children:[Object(u.jsx)("label",{children:"Supply"}),Object(u.jsx)("input",{type:"text",placeholder:"Supply",className:"form-control",name:"supply",value:H,onChange:function(e){return function(e){(""===e.target.value||/^[0-9\b]+$/.test(e.target.value))&&J(Object(c.a)(Object(c.a)({},R),{},Object(a.a)({},e.target.name,e.target.value)))}(e)},required:k})]})}),Object(u.jsx)("div",{className:"col-sm-6",children:Object(u.jsxs)("div",{className:"form-group",children:[Object(u.jsx)("label",{children:"Select ITO"}),Object(u.jsxs)("select",{name:"ito_id",className:"form-control",onChange:W,placeholder:"Select Status",children:[Object(u.jsx)("option",{value:"",children:"Select..."}),null===v||void 0===v?void 0:v.map((function(e){return Object(u.jsx)("option",{value:e.id,children:e.name},e.id)}))]})]})}),Object(u.jsxs)("div",{className:"col-sm-6",children:[Object(u.jsx)("label",{children:"Start Date"}),Object(u.jsx)("input",{type:"date",placeholder:"Start Date",className:"form-control",name:"start_date",value:$,min:(new Date).toISOString().split("T")[0],onChange:function(e){return W(e)},required:k})]}),Object(u.jsx)("div",{className:"col-sm-6",children:Object(u.jsxs)("div",{className:"form-group",children:[Object(u.jsx)("label",{children:"End Date"}),Object(u.jsx)("input",{type:"date",placeholder:"End Date",className:"form-control",name:"end_date",value:z,min:(new Date).toISOString().split("T")[0],onChange:function(e){return W(e)},required:k})]})}),Object(u.jsxs)("div",{className:"col-sm-12",children:[Object(u.jsx)("label",{children:"Description"}),Object(u.jsx)("textarea",{placeholder:"Description",className:"form-control",name:"description",value:B,onChange:function(e){return W(e)},required:k})]})]}),Object(u.jsxs)("button",{type:"submit",className:"btn btn-primary btn-lg",disabled:C,children:[C&&Object(u.jsx)("span",{className:"spinner-border spinner-border-sm"})," ","CREATE NEW SERIES"]})]}),Object(u.jsxs)("button",{className:"btn btn-primary btn-lg seriesdraft",onClick:function(e){e.preventDefault(),A(!1);var t={series_name:R.name||null,start_date:R.start_date||null,end_date:R.end_date||null,description:R.description||null,supply:R.supply||null,ito_id:R.ito_id||null};f(Object(b.s)(t))},children:[C&&Object(u.jsx)("span",{className:"spinner-border spinner-border-sm"})," ","SAVE AS DRAFT"]})]})})})}),S&&Object(u.jsxs)(r.a,{size:"md",show:S,onHide:G,style:{opacity:1},centered:!0,children:[Object(u.jsx)("div",{className:"modal-header border-0",children:Object(u.jsx)("button",{type:"button",className:"close",onClick:G,children:Object(u.jsx)("span",{className:"font-18",children:"\xd7"})})}),Object(u.jsxs)(r.a.Body,{className:"text-center",children:[Object(u.jsx)("div",{children:Object(u.jsxs)("p",{children:["Are you sure, you you want to create ",Object(u.jsx)("strong",{children:"ITO series"})]})}),Object(u.jsxs)("ul",{className:"row data-confirmation",children:[Object(u.jsxs)("li",{className:"col-12 col-md-6",children:[Object(u.jsx)("span",{children:"Asset Name : "}),Object(u.jsx)("span",{style:{paddingLeft:"4px"},children:U})]}),Object(u.jsxs)("li",{className:"col-12 col-md-6",children:[Object(u.jsx)("span",{children:"Supply : "}),Object(u.jsx)("span",{style:{paddingLeft:"4px"},children:H})]}),Object(u.jsxs)("li",{className:"col-12 col-md-6",children:[Object(u.jsx)("span",{children:"Start Date : "}),Object(u.jsxs)("span",{style:{paddingLeft:"4px"},children:[$," $"]})]}),Object(u.jsxs)("li",{className:"col-12 col-md-6",children:[Object(u.jsx)("span",{children:"End Date : "}),Object(u.jsx)("span",{style:{paddingLeft:"4px"},children:z})]}),Object(u.jsxs)("li",{className:"col-12 col-md-6",children:[Object(u.jsx)("span",{children:"Description : "}),Object(u.jsx)("span",{style:{paddingLeft:"4px"},children:B})]})]}),Object(u.jsx)("button",{type:"button",className:"btn btn-primary w-25 btn-md",onClick:function(){E(!0),x({formData:R,setFormData:J,setLoading:E,history:N}),D(!1)},children:"Ok"})]}),Object(u.jsx)(r.a.Footer,{className:"border-0"})]})]})}))}}]);
//# sourceMappingURL=44.627ac0a4.chunk.js.map